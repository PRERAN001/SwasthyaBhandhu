<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Dashboard - SwasthyaBhandhu</title>
    <link rel="stylesheet" href="assets/common.css">
    <link rel="stylesheet" href="doctor.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">SwasthyaBhandhu</a>
            <div class="header-actions">
                <div id="google_translate_element"></div>
                <div class="user-info">
                    <span id="user-name">Dr. User</span>
                    <button class="btn btn-outline" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="tabs" id="doctor-tabs">
            <!-- Tab Headers -->
            <div class="tab-headers">
                <button class="tab-header active">Profile</button>
                <button class="tab-header">Appointments</button>
                <button class="tab-header">Consultation</button>
                <button class="tab-header">Patient Records</button>
                <button class="tab-header">Consultation History</button>
                <button class="tab-header">Messaging</button>
                <button class="tab-header">Analytics</button>
            </div>

            <!-- Tab 1: Profile -->
            <div class="tab-content active">
                <h2 class="card-header">Doctor Profile</h2>
                <div class="card">
                    <form id="profile-form" onsubmit="return saveProfile(event)">
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input type="text" name="name" class="form-input" id="profile-name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Specialization</label>
                                <input type="text" name="specialization" class="form-input" id="profile-specialization" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" name="email" class="form-input" id="profile-email" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone</label>
                                <input type="tel" name="phone" class="form-input" id="profile-phone" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">License Number</label>
                                <input type="text" name="licenseNo" class="form-input" id="profile-license">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Years of Experience</label>
                                <input type="number" name="experience" class="form-input" id="profile-experience">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">About</label>
                            <textarea name="about" class="form-textarea" id="profile-about" rows="4"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Profile</button>
                    </form>
                </div>
            </div>

            <!-- Tab 2: Appointments -->
            <div class="tab-content">
                <div class="flex-between mb-2">
                    <h2 class="card-header">Upcoming Appointments</h2>
                    <button class="btn btn-primary" onclick="openModal('add-appointment-modal')">Add Appointment</button>
                </div>
                <div class="card">
                    <table class="table" id="appointments-table">
                        <thead>
                            <tr>
                                <th>Patient</th>
                                <th>Date & Time</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointments-list">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tab 3: Consultation -->
            <div class="tab-content">
                <h2 class="card-header">Video Consultation</h2>
                <div class="card">
                    <div class="consultation-controls mb-3">
                        <button class="btn btn-primary" onclick="startConsultation()">Start Consultation</button>
                        <button class="btn btn-danger" onclick="endConsultation()" id="end-call-btn" style="display: none;">End Call</button>
                        <button class="btn btn-outline" onclick="toggleMicrophone()" id="mic-btn" style="display: none;">üé§ Mute</button>
                        <button class="btn btn-outline" onclick="toggleCamera()" id="camera-btn" style="display: none;">üìπ Stop Video</button>
                    </div>
                    
                    <div id="consultation-status" class="alert alert-info mb-2">Ready to start consultation</div>
                    
                    <div class="video-container">
                        <div class="video-grid">
                            <div class="video-wrapper">
                                <video id="local-video" class="video-element" autoplay muted playsinline></video>
                                <div class="video-label">You</div>
                            </div>
                            <div class="video-wrapper">
                                <video id="remote-video" class="video-element" autoplay playsinline></video>
                                <div class="video-label">Patient</div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <h3>Consultation Notes</h3>
                        <div class="flex gap-2 mb-2">
                            <button class="btn btn-secondary" onclick="startVoiceRecording()" id="voice-record-btn">üé§ Start Voice Notes</button>
                            <button class="btn btn-outline" onclick="stopVoiceRecording()" id="voice-stop-btn" style="display: none;">‚èπÔ∏è Stop & Generate Summary</button>
                        </div>
                        <textarea class="form-textarea" id="consultation-notes" placeholder="Enter consultation notes or use voice recording..."></textarea>
                        <button class="btn btn-secondary mt-2" onclick="saveConsultationNotes()">Save Notes</button>
                    </div>
                </div>
            </div>

            <!-- Tab 4: Patient Records -->
            <div class="tab-content">
                <div class="flex-between mb-2">
                    <h2 class="card-header">Patient Records</h2>
                    <input type="text" class="form-input" placeholder="Search patients..." style="max-width: 300px;" id="patient-search">
                </div>
                <div id="patients-grid" class="grid grid-2">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Tab 5: Consultation History -->
            <div class="tab-content">
                <h2 class="card-header">Consultation History (Video Recordings)</h2>
                <div class="card">
                    <div id="consultation-history-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Tab 6: Messaging -->
            <div class="tab-content">
                <h2 class="card-header">Messages</h2>
                <div class="messaging-container">
                    <div class="message-sidebar">
                        <h3>Conversations</h3>
                        <div id="conversations-list">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    <div class="message-main">
                        <div id="messages-container" class="messages-area">
                            <p class="text-center" style="color: var(--text-secondary);">Select a conversation to view messages</p>
                        </div>
                        <div class="message-input-area">
                            <input type="text" class="form-input" placeholder="Type a message..." id="message-input">
                            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 7: Analytics -->
            <div class="tab-content">
                <h2 class="card-header">Analytics & Statistics</h2>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="stat-number" id="total-patients">0</div>
                        <div class="stat-label">Total Patients</div>
                    </div>
                    <div class="card">
                        <div class="stat-number" id="total-consultations">0</div>
                        <div class="stat-label">Total Consultations</div>
                    </div>
                    <div class="card">
                        <div class="stat-number" id="pending-appointments">0</div>
                        <div class="stat-label">Pending Appointments</div>
                    </div>
                </div>
                <div class="card mt-3">
                    <h3>Recent Activity</h3>
                    <div id="recent-activity">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div id="add-appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Schedule Appointment</h3>
                <button class="modal-close" onclick="closeModal('add-appointment-modal')">&times;</button>
            </div>
            <form id="add-appointment-form" onsubmit="return addAppointment(event)">
                <div class="form-group">
                    <label class="form-label">Patient</label>
                    <select name="patientId" class="form-select" required id="patient-select">
                        <option value="">Select Patient</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" name="date" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Time</label>
                    <input type="time" name="time" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Type</label>
                    <select name="type" class="form-select" required>
                        <option value="in-person">In-Person</option>
                        <option value="video">Video Call</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea name="notes" class="form-textarea"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Schedule</button>
            </form>
        </div>
    </div>

    <!-- View Patient Modal -->
    <div id="view-patient-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Patient Details</h3>
                <button class="modal-close" onclick="closeModal('view-patient-modal')">&times;</button>
            </div>
            <div id="patient-details-content">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <script src="assets/common.js"></script>
    <script src="assets/config.js"></script>
    <script src="assets/video-consultation.js"></script>
    <script src="doctor.js"></script>
</body>
</html>
